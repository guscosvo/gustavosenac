<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Enzo Pezzi Clicker</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Poppins:wght@400;700&display=swap');
        
        body {
            font-family: 'Poppins', sans-serif;
            background-color: #f0f9ff;
            color: #0c4a6e;
            transition: background-color 0.5s;
        }
        
        .boss-fight {
            animation: shake 0.5s infinite;
            background-color: #fee2e2;
        }
        
        @keyframes shake {
            0% { transform: translateX(0); }
            25% { transform: translateX(-5px); }
            50% { transform: translateX(5px); }
            75% { transform: translateX(-5px); }
            100% { transform: translateX(0); }
        }
        
        .final-boss {
            animation: pulse 1s infinite, colorChange 3s infinite;
        }
        
        @keyframes pulse {
            0% { transform: scale(1); }
            50% { transform: scale(1.05); }
            100% { transform: scale(1); }
        }
        
        @keyframes colorChange {
            0% { background-color: #fee2e2; }
            33% { background-color: #fef3c7; }
            66% { background-color: #dbeafe; }
            100% { background-color: #fee2e2; }
        }
        
        .upgrade {
            transition: all 0.3s;
        }
        
        .upgrade:hover {
            transform: translateY(-3px);
            box-shadow: 0 10px 15px -3px rgba(0, 0, 0, 0.1);
        }
        
        .click-effect {
            position: absolute;
            background-color: rgba(255, 255, 255, 0.7);
            border-radius: 50%;
            pointer-events: none;
            transform: translate(-50%, -50%);
            animation: clickAnim 0.5s forwards;
        }
        
        @keyframes clickAnim {
            0% {
                width: 0;
                height: 0;
                opacity: 1;
            }
            100% {
                width: 100px;
                height: 100px;
                opacity: 0;
            }
        }
        
        .sound-toggle {
            transition: all 0.3s;
        }
        
        .sound-toggle:hover {
            transform: scale(1.1);
        }
        
        .sound-off {
            color: #ef4444;
        }
    </style>
</head>
<body class="min-h-screen flex flex-col">
    <header class="bg-sky-800 text-white p-4 shadow-lg">
        <div class="container mx-auto flex justify-between items-center">
            <h1 class="text-2xl md:text-3xl font-bold">Enzo Pezzi Clicker 3</h1>
            <div class="flex items-center space-x-4">
                <button id="soundToggle" class="sound-toggle text-2xl">
                    <i class="fas fa-volume-up"></i>
                </button>
                <div class="bg-sky-700 px-3 py-1 rounded-lg">
                    <span id="faltasCounter" class="font-bold">0</span> faltas
                </div>
            </div>
        </div>
    </header>

    <main class="flex-grow container mx-auto p-4 flex flex-col items-center">
        <div id="bossContainer" class="hidden w-full max-w-2xl mb-8 p-6 rounded-xl shadow-lg text-center">
            <h2 id="bossName" class="text-2xl font-bold mb-2"></h2>
            <div class="flex justify-between items-center mb-4">
                <span id="bossHealthText" class="font-bold"></span>
                <div class="w-full bg-gray-200 rounded-full h-4 mx-4">
                    <div id="bossHealthBar" class="bg-red-600 h-4 rounded-full"></div>
                </div>
            </div>
            <p id="bossDescription" class="mb-4"></p>
            <button id="attackBossBtn" class="bg-red-600 hover:bg-red-700 text-white font-bold py-2 px-6 rounded-lg transition">
                Atacar!
            </button>
        </div>

        <div id="mainGame" class="text-center">
            <h2 class="text-xl mb-2">Enzo Pezzi Fontana está faltando na escola!</h2>
            <p class="mb-6">Clique nele para acumular faltas!</p>
            
            <div id="enzoContainer" class="relative cursor-pointer mb-8">
                <img id="enzoImage" src="padrao.webp" alt="Enzo Pezzi" class="w-48 h-48 mx-auto rounded-full border-4 border-sky-500 hover:border-sky-600 transition">
            </div>
            
            <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4 mb-8">
                <div class="upgrade bg-white p-4 rounded-lg shadow-md border border-sky-200">
                    <h3 class="font-bold text-lg mb-2">Tô doente</h3>
                    <p class="text-sm mb-3">+1 falta por segundo</p>
                    <button class="buyUpgrade bg-sky-500 hover:bg-sky-600 text-white py-1 px-3 rounded" data-cost="10" data-value="1" data-id="1">
                        Comprar (10)
                    </button>
                    <div class="mt-2 text-xs">
                        Comprado: <span class="upgradeCount font-bold">0</span>
                    </div>
                </div>
                
                <div class="upgrade bg-white p-4 rounded-lg shadow-md border border-sky-200">
                    <h3 class="font-bold text-lg mb-2">Meus pais me deixaram de castigo</h3>
                    <p class="text-sm mb-3">+5 faltas por segundo</p>
                    <button class="buyUpgrade bg-sky-500 hover:bg-sky-600 text-white py-1 px-3 rounded" data-cost="50" data-value="5" data-id="2">
                        Comprar (50)
                    </button>
                    <div class="mt-2 text-xs">
                        Comprado: <span class="upgradeCount font-bold">0</span>
                    </div>
                </div>
                
                <div class="upgrade bg-white p-4 rounded-lg shadow-md border border-sky-200">
                    <h3 class="font-bold text-lg mb-2">Fiquei jogando Suzerain</h3>
                    <p class="text-sm mb-3">+10 faltas por segundo</p>
                    <button class="buyUpgrade bg-sky-500 hover:bg-sky-600 text-white py-1 px-3 rounded" data-cost="100" data-value="10" data-id="3">
                        Comprar (100)
                    </button>
                    <div class="mt-2 text-xs">
                        Comprado: <span class="upgradeCount font-bold">0</span>
                    </div>
                </div>
                
                <div class="upgrade bg-white p-4 rounded-lg shadow-md border border-sky-200">
                    <h3 class="font-bold text-lg mb-2">Fiquei no Discord</h3>
                    <p class="text-sm mb-3">+20 faltas por segundo</p>
                    <button class="buyUpgrade bg-sky-500 hover:bg-sky-600 text-white py-1 px-3 rounded" data-cost="200" data-value="20" data-id="4">
                        Comprar (200)
                    </button>
                    <div class="mt-2 text-xs">
                        Comprado: <span class="upgradeCount font-bold">0</span>
                    </div>
                </div>
                
                <div class="upgrade bg-white p-4 rounded-lg shadow-md border border-sky-200">
                    <h3 class="font-bold text-lg mb-2">Joguei Club Penguin</h3>
                    <p class="text-sm mb-3">+50 faltas por segundo</p>
                    <button class="buyUpgrade bg-sky-500 hover:bg-sky-600 text-white py-1 px-3 rounded" data-cost="500" data-value="50" data-id="5">
                        Comprar (500)
                    </button>
                    <div class="mt-2 text-xs">
                        Comprado: <span class="upgradeCount font-bold">0</span>
                    </div>
                </div>
                
                <div class="upgrade bg-white p-4 rounded-lg shadow-md border border-sky-200">
                    <h3 class="font-bold text-lg mb-2">Fiz live na Twitch</h3>
                    <p class="text-sm mb-3">+100 faltas por segundo</p>
                    <button class="buyUpgrade bg-sky-500 hover:bg-sky-600 text-white py-1 px-3 rounded" data-cost="1000" data-value="100" data-id="6">
                        Comprar (1000)
                    </button>
                    <div class="mt-2 text-xs">
                        Comprado: <span class="upgradeCount font-bold">0</span>
                    </div>
                </div>
            </div>
        </div>

        <div id="winScreen" class="hidden text-center p-8 bg-gradient-to-r from-green-400 to-blue-500 rounded-xl shadow-xl text-white max-w-2xl">
            <h2 class="text-3xl font-bold mb-4">PARABÉNS!</h2>
            <p class="text-xl mb-6">Você zerou o Enzo Pezzi Clicker 3!</p>
            <p class="mb-6">Enzo conseguiu acumular tantas faltas que foi expulso da escola e agora pode faltar o quanto quiser!</p>
            <img src="comemorar.webp" alt="Enzo vitorioso" class="w-32 h-32 mx-auto rounded-full border-4 border-white mb-6">
            <button id="restartGameBtn" class="bg-white text-blue-500 font-bold py-2 px-6 rounded-lg hover:bg-gray-100 transition">
                Jogar Novamente
            </button>
        </div>
    </main>

    <footer class="bg-sky-800 text-white p-4 text-center">
        <p>Se faltar é arte, então Enzo é Picasso!</p>
    </footer>

    <audio id="clickSound" src="https://assets.mixkit.co/sfx/preview/mixkit-arcade-game-jump-coin-216.mp3"></audio>
    <audio id="upgradeSound" src="https://assets.mixkit.co/sfx/preview/mixkit-unlock-game-notification-253.mp3"></audio>
    <audio id="bossSound" src="https://assets.mixkit.co/sfx/preview/mixkit-ominous-drums-227.mp3"></audio>
    <audio id="attackSound" src="https://assets.mixkit.co/sfx/preview/mixkit-short-explosion-1694.mp3"></audio>
    <audio id="winSound" src="https://assets.mixkit.co/sfx/preview/mixkit-winning-chimes-2015.mp3"></audio>
    <audio id="bgMusic" loop src="https://assets.mixkit.co/music/preview/mixkit-game-show-suspense-waiting-668.mp3"></audio>

    <script>
        // Game state
        const gameState = {
            faltas: 0,
            faltasPerSecond: 0,
            upgrades: {
                1: { count: 0, cost: 10, value: 1 },
                2: { count: 0, cost: 50, value: 5 },
                3: { count: 0, cost: 100, value: 10 },
                4: { count: 0, cost: 200, value: 20 },
                5: { count: 0, cost: 500, value: 50 },
                6: { count: 0, cost: 1000, value: 100 }
            },
            bosses: [
                {
                    name: "Professor Chato",
                    description: "O professor percebeu que Enzo está faltando muito e quer marcar presença!",
                    health: 50,
                    reward: 100,
                    damage: 5
                },
                {
                    name: "Coordenadora Rigorosa",
                    description: "A coordenadora está investigando as faltas de Enzo e quer reduzir seu total!",
                    health: 150,
                    reward: 300,
                    damage: 15
                },
                {
                    name: "Diretor da Escola",
                    description: "O diretor está furioso com as faltas de Enzo e ameaça expulsão!",
                    health: 300,
                    reward: 600,
                    damage: 30
                },
                {
                    name: "Conselho Escolar",
                    description: "O conselho escolar está reunido para decidir o futuro de Enzo na escola!",
                    health: 600,
                    reward: 1200,
                    damage: 60
                },
                {
                    name: "MINISTÉRIO DA EDUCAÇÃO",
                    description: "O CASO DE ENZO CHEGOU AO GOVERNO! O MINISTÉRIO QUER RESOLVER ISSO DE UMA VEZ!",
                    health: 1200,
                    reward: 2500,
                    damage: 120,
                    isFinal: true
                }
            ],
            currentBoss: null,
            bossHealth: 0,
            soundOn: true,
            bossSpawnThreshold: 100,
            nextBossIndex: 0
        };

        // DOM elements
        const faltasCounter = document.getElementById('faltasCounter');
        const enzoContainer = document.getElementById('enzoContainer');
        const enzoImage = document.getElementById('enzoImage');
        const bossContainer = document.getElementById('bossContainer');
        const bossName = document.getElementById('bossName');
        const bossDescription = document.getElementById('bossDescription');
        const bossHealthText = document.getElementById('bossHealthText');
        const bossHealthBar = document.getElementById('bossHealthBar');
        const attackBossBtn = document.getElementById('attackBossBtn');
        const mainGame = document.getElementById('mainGame');
        const winScreen = document.getElementById('winScreen');
        const restartGameBtn = document.getElementById('restartGameBtn');
        const soundToggle = document.getElementById('soundToggle');
        const buyUpgradeButtons = document.querySelectorAll('.buyUpgrade');

        // Audio elements
        const clickSound = document.getElementById('clickSound');
        const upgradeSound = document.getElementById('upgradeSound');
        const bossSound = document.getElementById('bossSound');
        const attackSound = document.getElementById('attackSound');
        const winSound = document.getElementById('winSound');
        const bgMusic = document.getElementById('bgMusic');

        // Initialize game
        function initGame() {
            gameState.faltas = 0;
            gameState.faltasPerSecond = 0;
            gameState.nextBossIndex = 0;
            
            for (let id in gameState.upgrades) {
                gameState.upgrades[id].count = 0;
            }
            
            updateUI();
            hideBoss();
            mainGame.classList.remove('hidden');
            winScreen.classList.add('hidden');
            
            if (gameState.soundOn) {
                bgMusic.play().catch(e => console.log("Autoplay prevented:", e));
            }
        }

        // Update UI
        function updateUI() {
            faltasCounter.textContent = Math.floor(gameState.faltas);
            
            // Update upgrade buttons
            buyUpgradeButtons.forEach(button => {
                const id = button.dataset.id;
                const upgrade = gameState.upgrades[id];
                const canAfford = gameState.faltas >= upgrade.cost;
                
                button.disabled = !canAfford;
                button.textContent = `Comprar (${upgrade.cost})`;
                button.parentElement.querySelector('.upgradeCount').textContent = upgrade.count;
                
                if (canAfford) {
                    button.classList.remove('bg-gray-400');
                    button.classList.add('bg-sky-500', 'hover:bg-sky-600');
                } else {
                    button.classList.remove('bg-sky-500', 'hover:bg-sky-600');
                    button.classList.add('bg-gray-400');
                }
            });
            
            // Check for boss spawn
            if (gameState.nextBossIndex < gameState.bosses.length && 
                gameState.faltas >= gameState.bossSpawnThreshold && 
                !gameState.currentBoss) {
                spawnBoss();
                gameState.bossSpawnThreshold *= 2.5;
            }
        }

        // Spawn boss
        function spawnBoss() {
            gameState.currentBoss = gameState.bosses[gameState.nextBossIndex];
            gameState.bossHealth = gameState.currentBoss.health;
            gameState.nextBossIndex++;
            
            bossName.textContent = gameState.currentBoss.name;
            bossDescription.textContent = gameState.currentBoss.description;
            updateBossHealth();
            
            bossContainer.classList.remove('hidden');
            if (gameState.currentBoss.isFinal) {
                bossContainer.classList.add('final-boss');
                document.body.classList.add('boss-fight');
            } else {
                bossContainer.classList.add('boss-fight');
            }
            
            mainGame.classList.add('opacity-50');
            
            if (gameState.soundOn) {
                bossSound.currentTime = 0;
                bossSound.play();
            }
        }

        // Update boss health UI
        function updateBossHealth() {
            const percentage = (gameState.bossHealth / gameState.currentBoss.health) * 100;
            bossHealthBar.style.width = `${percentage}%`;
            bossHealthText.textContent = `${gameState.bossHealth}/${gameState.currentBoss.health}`;
        }

        // Hide boss
        function hideBoss() {
            bossContainer.classList.add('hidden');
            bossContainer.classList.remove('boss-fight', 'final-boss');
            document.body.classList.remove('boss-fight');
            mainGame.classList.remove('opacity-50');
        }

        // Attack boss
        function attackBoss() {
            if (!gameState.currentBoss) return;
            
            const damage = 10 + Math.floor(Math.random() * 20);
            gameState.bossHealth -= damage;
            
            if (gameState.soundOn) {
                attackSound.currentTime = 0;
                attackSound.play();
            }
            
            // Create damage number effect
            const damageText = document.createElement('div');
            damageText.textContent = `-${damage}`;
            damageText.className = 'absolute text-red-600 font-bold text-xl animate-bounce';
            damageText.style.left = `${50 + Math.random() * 20 - 10}%`;
            damageText.style.top = '30%';
            bossContainer.appendChild(damageText);
            
            setTimeout(() => {
                damageText.remove();
            }, 1000);
            
            updateBossHealth();
            
            if (gameState.bossHealth <= 0) {
                // Boss defeated
                gameState.faltas += gameState.currentBoss.reward;
                
                if (gameState.currentBoss.isFinal) {
                    // Final boss defeated - win game
                    winGame();
                } else {
                    // Normal boss defeated
                    hideBoss();
                    if (gameState.soundOn) {
                        upgradeSound.currentTime = 0;
                        upgradeSound.play();
                    }
                }
                
                gameState.currentBoss = null;
            } else {
                // Boss attacks back
                setTimeout(() => {
                    gameState.faltas = Math.max(0, gameState.faltas - gameState.currentBoss.damage);
                    updateUI();
                    
                    // Create damage taken effect
                    const damageTakenText = document.createElement('div');
                    damageTakenText.textContent = `-${gameState.currentBoss.damage}`;
                    damageTakenText.className = 'absolute text-red-800 font-bold text-xl animate-bounce';
                    damageTakenText.style.left = '50%';
                    damageTakenText.style.top = '50%';
                    enzoContainer.appendChild(damageTakenText);
                    
                    setTimeout(() => {
                        damageTakenText.remove();
                    }, 1000);
                    
                    // Shake Enzo
                    enzoImage.classList.add('animate-shake');
                    setTimeout(() => {
                        enzoImage.classList.remove('animate-shake');
                    }, 500);
                }, 500);
            }
            
            updateUI();
        }

        // Win game
        function winGame() {
            hideBoss();
            mainGame.classList.add('hidden');
            winScreen.classList.remove('hidden');
            
            if (gameState.soundOn) {
                winSound.play();
                bgMusic.pause();
            }
        }

        // Buy upgrade
        function buyUpgrade(id) {
            const upgrade = gameState.upgrades[id];
            
            if (gameState.faltas >= upgrade.cost) {
                gameState.faltas -= upgrade.cost;
                upgrade.count++;
                gameState.faltasPerSecond += upgrade.value;
                
                // Increase cost for next purchase
                upgrade.cost = Math.floor(upgrade.cost * 1.15);
                
                if (gameState.soundOn) {
                    upgradeSound.currentTime = 0;
                    upgradeSound.play();
                }
                
                updateUI();
            }
        }

        // Click Enzo
        function clickEnzo(e) {
            gameState.faltas++;
            
            if (gameState.soundOn) {
                clickSound.currentTime = 0;
                clickSound.play();
            }
            
            // Create click effect
            const clickEffect = document.createElement('div');
            clickEffect.className = 'click-effect';
            clickEffect.style.left = `${e.clientX}px`;
            clickEffect.style.top = `${e.clientY}px`;
            document.body.appendChild(clickEffect);
            
            setTimeout(() => {
                clickEffect.remove();
            }, 500);
            
            // Bounce Enzo
            enzoImage.classList.add('animate-bounce');
            setTimeout(() => {
                enzoImage.classList.remove('animate-bounce');
            }, 300);
            
            updateUI();
        }

        // Toggle sound
        function toggleSound() {
            gameState.soundOn = !gameState.soundOn;
            
            const icon = soundToggle.querySelector('i');
            if (gameState.soundOn) {
                icon.classList.remove('fa-volume-mute', 'sound-off');
                icon.classList.add('fa-volume-up');
                bgMusic.play().catch(e => console.log("Autoplay prevented:", e));
            } else {
                icon.classList.remove('fa-volume-up');
                icon.classList.add('fa-volume-mute', 'sound-off');
                bgMusic.pause();
            }
        }

        // Game loop for passive income
        function gameLoop() {
            gameState.faltas += gameState.faltasPerSecond / 10;
            updateUI();
        }

        // Event listeners
        enzoContainer.addEventListener('click', clickEnzo);
        attackBossBtn.addEventListener('click', attackBoss);
        restartGameBtn.addEventListener('click', initGame);
        soundToggle.addEventListener('click', toggleSound);
        
        buyUpgradeButtons.forEach(button => {
            button.addEventListener('click', () => {
                buyUpgrade(button.dataset.id);
            });
        });

        // Start game
        initGame();
        setInterval(gameLoop, 100);
    </script>
</body>
</html>